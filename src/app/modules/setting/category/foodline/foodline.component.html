<div class="bg-white width-screen">
    <div class="container-toolbar">
        <div class="left-toolbar d-flex gap-2 align-items-center">
            <span class="icon-Development-11 fs-24 text-common-black fw-600"></span>
            <span class="text-common-black fw-600 fs-16">Danh mục</span>
            <span class="text-common-black fw-500 fs-16">></span>
            <span class="text-common-black fw-500 fs-16">Phân loại line món ăn</span>
        </div>
        <div class="right-toolbar">
            <div class="button-toolbar" (click)="dialogAdd.show()">
                <span class="icon-General-113"></span>
                <span>Thêm</span>
            </div>
            <div class="button-toolbar">
                <span class="icon-General-84"></span>
                <span>Sửa</span>
            </div>
            <div class="button-toolbar">
                <span class="icon-General-163"></span>
                <span>Xoá</span>
            </div>
            <div class="button-toolbar">
                <span class="icon-General-3"></span>
                <span>Import</span>
            </div>
        </div>
    </div>
    <div class="mx-2">
        <grid-view [totalItems]="totalItems" (clickPage)="ClickPagerIndex($event)" [template]="templategrid"></grid-view>
    </div>
</div>
<ng-template #templategrid>
    <ejs-grid (recordClick)="selectedRowTable($event)" [height]="height" [sortSettings]='sortOptions' [dataSource]='listSubgroup' [allowSorting]="true" [pageSettings]="pageSettings">
        <e-columns>
            <e-column headerText="Mã ca" textAlign='Left' width=110>
                <ng-template #template let-item>
                    <div>{{item.MaLine}}</div>
                </ng-template>
            </e-column>
            <e-column headerText="Tên ca" width=110 textAlign='Left'>
                <ng-template #template let-item>
                    <span> {{item.TenLine}}</span>

                </ng-template>
            </e-column>
            <e-column headerText="Phân loại" width=110 textAlign='Center'>
                <ng-template #template let-item>
                    <div class="w-100 d-flex justify-content-center">
                        <div class="type-subgroup d-flex align-items-center gap-2">
                            <i class="icon-FinanceCommerce-68"></i>
                            <div>
                                {{item.PhanLoaiLineName}}
                            </div>
                        </div>
                    </div>
                </ng-template>
            </e-column>
            <e-column headerText="Nhà thầu" width=110 textAlign='Left'>
              <ng-template #template let-item>
                  <span> {{item.NhaThau}}</span>
              </ng-template>
          </e-column>
            <e-column headerText="Đơn giá" width=100 textAlign='Center'>
                <ng-template #template let-item>
                    <span class="fw-600 fs-14">{{item.DonGia}}</span>
                </ng-template>
            </e-column>
            <e-column headerText="Ngày hiệu lực" width=120 textAlign='Center'>
                <ng-template #template let-item>
                    <span class="fw-600 fs-14">{{item.NgayHieuLuc | date:'dd/MM/yyyy'}}</span>
                </ng-template>
            </e-column>
            <e-column headerText="Người chỉnh sửa" width=120 textAlign='Center'>
                <ng-template #template let-item>
                    <div class="user-container" *ngIf="item.ModifiedBy">
                        <div class="user-img">
                            <img [src]="getPhoto(item.ModifiedBy)" alt="">
                        </div>
                        <div class="user-info">
                            <span class="name"> {{item.ModifiedBy}}</span>
                            <span class="time">{{item.ModifiedOn | date:'dd/MM/yyyy hh:mm'}}</span>
                        </div>
                    </div>
                </ng-template>
            </e-column>
            <e-column headerText="Xem lịch sử" width=120 textAlign='Center'>
                <ng-template #template let-item>
                    <div class="d-flex justify-content-center">
                        <button class="history-btn" (click)="onClickViewHistory(item.LineCode)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
                </svg>
              </button>
                    </div>
                </ng-template>
            </e-column>
        </e-columns>
    </ejs-grid>
</ng-template>
<!-- <app-history-dialog #historydialog></app-history-dialog> -->

<app-dialog #dialogAdd [templateBody]="content" headerText="Thêm ca làm việc"></app-dialog>

<ng-template #content>
  <div class="container mt-3">
    <div class="row gy-3">
      <div class="col-12">
        <app-input [(ngModel)]="tenLine" title="Tên line"></app-input>
      </div>
      <div class="col-12">
        <app-combobox [dataSource]="ListPhanLoai" [selectedItem]="selectPhanLoai" fieldName="TypeCode" (clickItem)="selectPhanLoai = $event"  title="Phân loại"></app-combobox>
      </div>
      <div class="col-12">
        <app-input [(ngModel)]="donGia" title="Đơn giá" type="number"></app-input>
      </div>
      <div class="col-12">
        <app-datetime title="Thời gian hiệu lực"></app-datetime>
      </div>
   </div>
  </div>
</ng-template>
