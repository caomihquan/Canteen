<div class="bg-white container-header d-flex justify-content-between position-sticky top-0" style="z-index: 99;">
  <div class="logo-header">
    <div style="width: 80px;float: left;"><img src="./assets/images/logo.png" alt=""></div>
    <div style="width: 360px;float: left;padding-top: 18px;color: #0C356A;font-size: 18px;font-style: normal;">
      <b>Phần mềm quản lý Canteen</b>
    </div>
  </div>
  <div class="align-items-center d-flex gap-3">
    <!-- <div #toggleButton [ngClass]="{'active-noti': showNoti}" class="noti-icon icon-header icon-header-1" (click)="fnOnClickNoti()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" viewBox="0 0 20 22" fill="none">
        <path d="M11.739 20.5H7.73903M15.739 7.5C15.739 5.9087 15.1069 4.38258 13.9817 3.25736C12.8565 2.13214 11.3303 1.5 9.73903 1.5C8.14773 1.5 6.62161 2.13214 5.49639 3.25736C4.37117 4.38258 3.73903 5.9087 3.73903 7.5C3.73903 10.5902 2.9595 12.706 2.0887 14.1054C1.35416 15.2859 0.986891 15.8761 1.00036 16.0408C1.01527 16.2231 1.05389 16.2926 1.20081 16.4016C1.33349 16.5 1.93162 16.5 3.12789 16.5H16.3502C17.5464 16.5 18.1446 16.5 18.2773 16.4016C18.4242 16.2926 18.4628 16.2231 18.4777 16.0408C18.4912 15.8761 18.1239 15.2859 17.3894 14.1054C16.5186 12.706 15.739 10.5902 15.739 7.5Z" stroke="#007455" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div> -->
    <!-- <div class="d-flex gap-2 align-items-center pointer" data-bs-target="#modalHistory" data-bs-toggle="modal">
      <i class="bi bi-coin"></i>
      <div  class="text-common-black text-danger fs-14 fw-600">{{_ordinal.Coin}} Xu</div>
      <div style="color: #c1c1c1;" class="ms-3">|</div>
    </div> -->
    <div class="align-items-center d-flex justify-content-center">
      <div class="me-4" style="float: left;color: #000000;font-size: 14px;font-style: normal;">
        {{user?.UserName}}
      </div>
      <div class="icon-header">
        <img width="40" height="40" [src]="getPhoto()" alt="" class="input-dropdown rounded-circle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
        <div class="dropdown">
          <ul class="dropdown-menu dropdown-menu-custom" aria-labelledby="dropdownMenuButton1">
            <li class="first-li">
              <div class="d-flex align-items-center gap-3 py-3 pt-0 border-bottom">
                <div class="position-relative">
                  <img width="50" height="50" [src]="getPhoto()" alt="" class="rounded">
                  <div class="edit-avt">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                      <g clip-path="url(#clip0_233_8055)">
                        <path d="M1.67767 10.5673C1.70447 10.3261 1.71787 10.2055 1.75436 10.0928C1.78674 9.99277 1.83248 9.89759 1.89035 9.80983C1.95558 9.71092 2.04138 9.62512 2.21299 9.45351L9.91666 1.74985C10.561 1.10552 11.6057 1.10552 12.25 1.74985C12.8943 2.39418 12.8943 3.43885 12.25 4.08319L4.54632 11.7868C4.37471 11.9585 4.28891 12.0443 4.19 12.1095C4.10224 12.1673 4.00707 12.2131 3.90706 12.2455C3.79433 12.282 3.67373 12.2954 3.43253 12.3222L1.45831 12.5415L1.67767 10.5673Z" stroke="#007455" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </g>
                      <defs>
                        <clipPath id="clip0_233_8055">
                          <rect width="14" height="14" fill="white"/>
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
                <div class="d-flex flex-column gap-2">
                  <div class="text-common-black fs-18">{{user?.UserName}}</div>
                  <div class="text-common-grey fs-14 normal">{{user?.UserID}}</div>
                </div>
              </div>
            </li>
            <li class="p-2 mt-2"  data-bs-target="#modalChangePassword" data-bs-toggle="modal">
              <div class="d-flex align-items-center gap-2">
                <div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M17 18.8742C19.1213 17.3287 20.5 14.8251 20.5 11.9996C20.5 7.30519 16.6944 3.49961 12 3.49961H11.5M12 20.4996C7.30558 20.4996 3.5 16.694 3.5 11.9996C3.5 9.17407 4.87867 6.67054 7 5.12501M11 22.3996L13 20.3996L11 18.3996M13 5.59961L11 3.59961L13 1.59961" stroke="#007455" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div  class="text-common-grey fs-14 normal">{{'Header.ChangePassword' | translate}}</div>
              </div>
            </li>
            <li class="p-2 mt-2" (click)="Logout()">
              <div class="d-flex align-items-center gap-2">
                <div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M16 17L21 12M21 12L16 7M21 12H9M9 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H9" stroke="#007455" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="text-common-grey fs-14 normal">{{'Header.Logout' | translate}}</div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="notification" [ngClass]="{'active-noti': showNoti}" style="width:360px;" #menu>
      <div class="d-flex justify-content-between p-4 align-items-center">
        <div class="label-noti">Thông báo</div>
        <div class="d-flex justify-content-center align-items-center gap-2">
          <!-- <div style="transform: rotate(90deg);">
            <i class="bi bi-arrow-left-right icon-noti"></i>
          </div>
          <div>
            <i class="bi bi-gear icon-noti"></i>
          </div> -->
        </div>
      </div>

      <div class="noti-container px-4 d-flex gap-3 align-items-start">
        <div class="noti-container-img position-relative">
          <div>
            <img class="rounded-5" style="height:50px;width:50px;" [src]="getPhoto()" alt="">
          </div>
          <div class="noti-img heart">
            <img src="./assets/svg/heart-outline.svg" alt="">
          </div>
        </div>
        <div class="noti-container-content">
          <div class="noti-container-content-label" >
            <span>Mary Cruz</span> đã bình luận một bài viết của bạn
          </div>
          <div class="noti-container-content-date" >
            26/11/2023 8:50 PM
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="modalChangePassword" tabindex="-1" aria-labelledby="modalChangePasswordLabel" aria-hidden="false">
  <div class="modal-dialog modal-dialog-scrollable" style="max-width: 585px">
    <div class="modal-content" style="height: 714px">
      <div class="modal-body">
        <div class="login-form">
          <div class="login-form-title">{{'Header.ChangePassword' | translate}}</div>
          <div class="login-form-container">
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="position-relative mb-4" style="height:53.2px;">
              <input  [placeholder]="'ChangePassword.PasswordOld' | translate" id="OldPassword" [type]="isShowPasswordOld ? 'text' : 'password'" formControlName="OldPassword" class="position-absolute">
              <i class="bi bi-eye position-absolute" *ngIf="!isShowPasswordOld" (click)="isShowPasswordOld = !isShowPasswordOld"></i>
              <i class="bi bi-eye-slash position-absolute" *ngIf="isShowPasswordOld" (click)="isShowPasswordOld = !isShowPasswordOld"></i>
            </div>
            <div class="position-relative mb-4" style="height:53.2px;">
              <input  [placeholder]="'ChangePassword.PasswordNew' | translate" id="NewPassword" [type]="isShowPasswordNew ? 'text' : 'password'" formControlName="NewPassword" class="position-absolute">
              <i class="bi bi-eye position-absolute" *ngIf="!isShowPasswordNew" (click)="isShowPasswordNew = !isShowPasswordNew"></i>
              <i class="bi bi-eye-slash position-absolute" *ngIf="isShowPasswordNew" (click)="isShowPasswordNew = !isShowPasswordNew"></i>
            </div>
            <div class="position-relative mb-4" style="height:53.2px;">
              <input  [placeholder]="'ChangePassword.PasswordConfirm' | translate" id="ConfirmPassword" [type]="isShowPasswordConfirm ? 'text' : 'password'" formControlName="ConfirmPassword" class="position-absolute">
              <i class="bi bi-eye position-absolute" *ngIf="!isShowPasswordConfirm" (click)="isShowPasswordConfirm = !isShowPasswordConfirm"></i>
              <i class="bi bi-eye-slash position-absolute" *ngIf="isShowPasswordConfirm" (click)="isShowPasswordConfirm = !isShowPasswordConfirm"></i>
            </div>

            <div class="d-flex justify-content-center" style="margin-top: 77px;">
              <button type="submit" class="btn-submit">
                {{'ChangePassword.ChangePassword' | translate}}
              </button>
             </div>
          </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #template>
  <!-- <div class="modal-header">
    <div class="modal-title pull-left text-common-black">{{ titleModal }}</div>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body fs-18 p-4">
    {{contentModal}}
  </div> -->
</ng-template>
<div data-bs-target="modal" id="hideModal" style="display:none"></div>




<div class="modal fade" id="modalHistory" tabindex="-1" aria-labelledby="modalHistoryLabel" aria-hidden="false">
  <div class="modal-dialog modal-dialog-scrollable" style="max-width: 1157px;">
    <div class="modal-content " style="height: 800px;">
      <div class="modal-header">
        <div class="d-flex align-items-center justify-content-between w-100">
          <div class="text-common-black fs-18 fw-500">Lịch sử thẻ</div>
          <div data-bs-dismiss="modal" class="pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M17 7L7 17M7 7L17 17" stroke="black" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </div>
        </div>
      </div>
      <div class="modal-body ">
        <div class="header-history d-flex align-items-center justify-content-between px-2">
          <div class="d-flex gap-3">
            <img class="rounded" width="60" height="60" [src]="getPhoto()" alt="" srcset="">
            <div>
              <div class="text-common-black">{{user?.UserName}}</div>
              <div class="text-common-black fs-14 fw-400">Kế toán trưởng</div>
              <div class="text-common-black fs-14 fw-400">Phòng kế toán khu A</div>
            </div>
          </div>
          <div>
            <div class="text-common-black fs-14 fw-400">Ngày cấp thẻ: 27/01/24</div>
            <div class="text-common-black fs-14 fw-400">Ngày nạp thẻ gần nhất: 27/01/2024</div>
          </div>
          <div>
            <div class="text-common-black fs-14 fw-400">Xu định mức: <span class="text-common-primary fw-600">{{_ordinal.Coin}}</span></div>
            <div class="text-common-black fs-14 fw-400">Xu nạp thêm: <span class="fw-600" style="color:var(--Color5);">0</span></div>
          </div>
        </div>
        <div class="px-2 pt-2">
          <ejs-grid  [height]="heightHistory"  [dataSource]='_ordinal.listHistory' >
            <e-columns>
                <e-column  headerText="Ngày phát sinh" textAlign='Left' width=150>
                  <ng-template #template let-item>
                    <div>{{item.NgayPhatSinh | date:'dd/MM/yyyy'}}</div>
                </ng-template>
                </e-column>
                <e-column headerText="Phân loại" width=150 textAlign='Left'>
                  <ng-template #template let-item>
                    <div class="text-start" [ngClass]="{'statusH1': item.Type == 1,'statusH2': item.Type == 2,'statusH3': item.Type == 3}">
                      <div *ngIf="item.Type == 1">Nạp thẻ</div>
                      <div *ngIf="item.Type == 2">Thanh toán</div>
                      <div *ngIf="item.Type ==3">Hoàn trả xu</div>
                    </div>
                  </ng-template>
                </e-column>
                <e-column headerText="Mô tả"  textAlign='Left' width=450>
                  <ng-template #template let-item>
                    <div style="width: 420px;" class="d-flex gap-2 flex-wrap">
                      <ng-container *ngFor="let food of item.listFood;let i  = index">
                        <div class="p-1 rounded" [ngStyle]="{'background': defaultColor[i % 10]}">
                        {{food.Name}}
                        </div>
                      </ng-container>
                    </div>
                  </ng-template>
                </e-column>
                <e-column headerText="Người chỉnh sửa"  textAlign='Left' width=160>
                  <ng-template #template let-item>
                    <div class="d-flex align-items-center gap-2">
                      <img width="40" height="40" [src]="getPhoto()" alt="" class="img-table rounded">
                      <div>{{user?.UserName}}</div>
                    </div>
                  </ng-template>
                </e-column>
                <e-column headerText="Tổng xu"  textAlign='Center' width=175>
                  <ng-template #template let-item>
                    <div class="d-flex align-items-center gap-2 justify-content-center">
                      <div *ngIf="item.Total > 0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                          <path d="M7.99998 3.33337V12.6667M3.33331 8.00004H12.6666" stroke="#54BF61" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </div>
                      <div *ngIf="item.Total < 0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                          <path d="M3.33331 8H12.6666" stroke="#C13535" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </div>
                      <div class="text-common-black">{{Abs(item.Total)}} xu</div>
                    </div>
                  </ng-template>
                </e-column>
            </e-columns>
            </ejs-grid>
        </div>
      </div>
    </div>
  </div>
</div>
